# 기능 명세 (Features)

## 기능 우선순위 정의

| 우선순위 | 설명 |
|---------|------|
| **P0** | MVP 필수 - 없으면 제품이 안 됨 |
| **P1** | MVP 권장 - 있으면 좋음 |
| **P2** | 추후 개발 - v2 이후 |

---

## 1. Chrome Extension 기능

### 1.1 세션 컨트롤 [P0]

| 기능 | 설명 |
|-----|------|
| **Start Session** | 기록 세션 시작 |
| **Stop Session** | 기록 세션 종료 & 서버 전송 |
| **Recording 상태 표시** | 현재 기록 중임을 알림 (시간, 페이지 수) |
| **로그인 상태 표시** | 연동된 계정 정보 표시 |

### 1.2 데이터 수집 [P0]

| 데이터 | 수집 방식 | 설명 |
|-------|----------|------|
| **URL** | `chrome.tabs` API | 방문한 페이지 주소 |
| **Page Title** | `chrome.tabs` API | 페이지 제목 |
| **Timestamp** | JavaScript Date | 방문 시작/종료 시간 |
| **Duration** | 계산 | 페이지 체류 시간 |
| **Tab ID** | `chrome.tabs` API | 탭 전환 추적용 |

### 1.3 하이라이팅 감지 [P1]

| 기능 | 설명 |
|-----|------|
| **텍스트 선택 감지** | Content Script로 selection 이벤트 감지 |
| **선택 텍스트 저장** | 드래그한 텍스트 + 해당 URL 저장 |
| **중복 제거** | 같은 텍스트 여러 번 선택 시 1회만 저장 |

### 1.4 오프라인 지원 [P1]

| 기능 | 설명 |
|-----|------|
| **로컬 임시 저장** | IndexedDB에 세션 데이터 임시 저장 |
| **자동 동기화** | 네트워크 복구 시 서버로 전송 |
| **비정상 종료 복구** | 브라우저 크래시 시 데이터 복구 |

### 1.5 UI 요소 [P0]

```
┌─────────────────────────────────┐
│  MindHit              [설정⚙️]  │
├─────────────────────────────────┤
│                                 │
│  ┌───────────────────────────┐  │
│  │                           │  │
│  │    [ 🔴 Start Session ]   │  │  ← 메인 버튼
│  │                           │  │
│  └───────────────────────────┘  │
│                                 │
│  ─────────────────────────────  │
│                                 │
│  마지막 세션                     │
│  📅 2시간 전 • 8 pages • 45분   │
│                                 │
│  [웹에서 보기 →]                │
│                                 │
└─────────────────────────────────┘

Recording 상태:
┌─────────────────────────────────┐
│  MindHit              [설정⚙️]  │
├─────────────────────────────────┤
│                                 │
│  ● Recording                    │
│                                 │
│  ⏱  01:32:45                   │
│  📄 12 pages                    │
│                                 │
│  ┌───────────────────────────┐  │
│  │    [ ⏹ Stop Session ]     │  │
│  └───────────────────────────┘  │
│                                 │
└─────────────────────────────────┘
```

---

## 2. Web App 기능

### 2.1 인증 [P0]

| 기능 | 설명 |
|-----|------|
| **이메일 회원가입** | 이메일 + 비밀번호 |
| **이메일 로그인** | 기본 로그인 |
| **Google OAuth** | 소셜 로그인 (P1) |
| **비밀번호 재설정** | 이메일로 재설정 링크 발송 |
| **로그아웃** | 세션 종료 |

### 2.2 대시보드 [P0]

| 기능 | 설명 |
|-----|------|
| **세션 목록** | 최신순으로 모든 세션 표시 |
| **세션 요약 카드** | 날짜, 시간, 페이지 수, 주요 키워드 |
| **검색** | 세션 내용 검색 (P1) |
| **필터** | 날짜별, 키워드별 필터 (P1) |

### 2.3 타임라인 뷰 [P0]

| 기능 | 설명 |
|-----|------|
| **시간순 페이지 목록** | 방문 순서대로 페이지 표시 |
| **체류 시간 표시** | 각 페이지별 머문 시간 |
| **하이라이트 표시** | 해당 페이지에서 하이라이팅한 텍스트 |
| **링크 클릭** | 원본 페이지로 이동 |
| **스크롤 네비게이션** | 긴 세션도 쉽게 탐색 |

### 2.4 마인드맵 뷰 [P0]

| 기능 | 설명 |
|-----|------|
| **자동 생성 마인드맵** | AI가 세션 기반으로 생성 |
| **줌 인/아웃** | 마인드맵 확대/축소 |
| **드래그 이동** | 캔버스 이동 |
| **노드 클릭** | 관련 페이지 목록 표시 |
| **노드 하이라이팅** | 중요 노드 강조 표시 |

### 2.5 마인드맵 상호작용 [P1]

| 기능 | 설명 |
|-----|------|
| **노드 수동 추가** | 사용자가 직접 노드 추가 |
| **노드 삭제** | 불필요한 노드 제거 |
| **연결선 편집** | 노드 간 관계 수정 |
| **노드 라벨 수정** | 텍스트 직접 편집 |

### 2.6 세션 관리 [P0]

| 기능 | 설명 |
|-----|------|
| **세션 삭제** | 세션 영구 삭제 |
| **세션 제목 수정** | AI 제안 제목 변경 가능 |

### 2.7 내보내기 [P1]

| 기능 | 설명 |
|-----|------|
| **마인드맵 이미지** | PNG/SVG로 다운로드 |
| **세션 데이터 JSON** | 원본 데이터 내보내기 |
| **마크다운** | 타임라인을 MD로 내보내기 |

### 2.8 설정 [P1]

| 기능 | 설명 |
|-----|------|
| **이메일 알림 설정** | 세션 종료 시 이메일 on/off |
| **제외할 도메인** | 기록하지 않을 사이트 목록 |
| **계정 삭제** | 모든 데이터 삭제 & 탈퇴 |

---

## 3. Backend 기능

### 3.1 API 엔드포인트 [P0]

| 엔드포인트 | 메서드 | 설명 |
|-----------|--------|------|
| `/auth/signup` | POST | 회원가입 |
| `/auth/login` | POST | 로그인 |
| `/auth/logout` | POST | 로그아웃 |
| `/sessions` | GET | 세션 목록 조회 |
| `/sessions` | POST | 새 세션 저장 |
| `/sessions/:id` | GET | 세션 상세 조회 |
| `/sessions/:id` | DELETE | 세션 삭제 |
| `/sessions/:id/mindmap` | GET | 마인드맵 데이터 조회 |

### 3.2 AI 마인드맵 생성 [P0]

| 기능 | 설명 |
|-----|------|
| **키워드 추출** | 페이지 제목, 하이라이트에서 핵심 키워드 추출 |
| **주제 클러스터링** | 관련 페이지들을 그룹화 |
| **계층 구조 생성** | 메인 토픽 → 서브 토픽 구조화 |
| **중요도 판단** | 체류 시간, 하이라이팅 기반 중요도 계산 |

### 3.3 이메일 서비스 [P0]

| 기능 | 설명 |
|-----|------|
| **세션 리포트 발송** | 세션 종료 후 요약 이메일 |
| **마인드맵 이미지 첨부** | 이메일에 마인드맵 미리보기 포함 |
| **딥링크** | 웹앱 해당 세션으로 바로 이동 |

---

## 4. 비기능 요구사항

### 4.1 성능

| 항목 | 목표 |
|-----|------|
| Extension 메모리 | < 50MB |
| API 응답 시간 | < 500ms |
| 마인드맵 생성 | < 30초 |
| 페이지 로드 | < 2초 |

### 4.2 보안

| 항목 | 구현 |
|-----|------|
| 인증 | JWT 토큰 |
| 비밀번호 | bcrypt 해싱 |
| API 통신 | HTTPS only |
| 데이터 | 사용자별 완전 분리 |

### 4.3 확장성

| 항목 | 고려사항 |
|-----|---------|
| 세션당 페이지 수 | 최대 500개 지원 |
| 동시 사용자 | 초기 1,000명 목표 |
| 데이터 보관 | 무제한 (유료 전환 시 제한 가능) |
