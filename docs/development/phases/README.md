# MindHit ê°œë°œ Phase ê°€ì´ë“œ

## ê°œìš”

ì´ ë””ë ‰í† ë¦¬ëŠ” MindHit í”„ë¡œì íŠ¸ì˜ ê°œë°œ ë‹¨ê³„ë¥¼ Phaseë³„ë¡œ êµ¬ë¶„í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤.
ê° PhaseëŠ” ë…ë¦½ì ì¸ ë¬¸ì„œë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í†µí•´ ì§„í–‰ ìƒí™©ì„ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Phase êµ¬ì¡°

```
phases/
â”œâ”€â”€ README.md                    # ì´ íŒŒì¼ (ê°œìš”)
â”œâ”€â”€ phase-0-dev-environment.md   # Docker ê°œë°œ í™˜ê²½
â”œâ”€â”€ phase-1-project-init.md      # í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
â”œâ”€â”€ phase-1.5-api-spec.md        # API ìŠ¤í™ ê³µí†µí™”
â”œâ”€â”€ phase-2-auth.md              # ì¸ì¦ ì‹œìŠ¤í…œ
â”œâ”€â”€ phase-3-sessions.md          # ì„¸ì…˜ ê´€ë¦¬ API
â”œâ”€â”€ phase-4-events.md            # ì´ë²¤íŠ¸ ìˆ˜ì§‘ API
â”œâ”€â”€ phase-5-infra.md             # ëª¨ë‹ˆí„°ë§ ë° ì¸í”„ë¼ (ê¸°ì´ˆ)
â”œâ”€â”€ phase-6-worker.md            # Worker ë° Job Queue
â”œâ”€â”€ phase-7-webapp.md            # Next.js ì›¹ì•±
â”œâ”€â”€ phase-8-extension.md         # Chrome Extension
â”œâ”€â”€ phase-9-plan-usage.md        # í”Œëœ ë° ì‚¬ìš©ëŸ‰ ì‹œìŠ¤í…œ (NEW)
â”œâ”€â”€ phase-10-ai.md               # AI ë§ˆì¸ë“œë§µ ìƒì„±
â”œâ”€â”€ phase-11-dashboard.md        # ì›¹ì•± ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ phase-12-monitoring.md       # í”„ë¡œë•ì…˜ ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ phase-13-deployment.md       # ë°°í¬ ë° ìš´ì˜
â””â”€â”€ phase-14-billing.md          # Stripe ê²°ì œ ì—°ë™
```

---

## ì „ì²´ ì§„í–‰ ìƒí™©

| Phase | ì´ë¦„ | ìƒíƒœ | ì˜ˆìƒ Step ìˆ˜ |
|-------|------|------|-------------|
| 0 | [3ë‹¨ê³„ ê°œë°œ í™˜ê²½ (go run + kind + EKS)](./phase-0-dev-environment.md) | âœ… ì™„ë£Œ | 6 steps |
| 1 | [í”„ë¡œì íŠ¸ ì´ˆê¸°í™”](./phase-1-project-init.md) | âœ… ì™„ë£Œ | 9 steps |
| 1.5 | [API ìŠ¤í™ ê³µí†µí™”](./phase-1.5-api-spec.md) | âœ… ì™„ë£Œ | 5 steps |
| 2 | [ì¸ì¦ ì‹œìŠ¤í…œ](./phase-2-auth.md) | âœ… ì™„ë£Œ | 6 steps |
| 2.1 | [Google OAuth](./phase-2.1-oauth.md) | â¬œ ëŒ€ê¸° | 1 step |
| 3 | [ì„¸ì…˜ ê´€ë¦¬ API](./phase-3-sessions.md) | âœ… ì™„ë£Œ | 3 steps |
| 4 | [ì´ë²¤íŠ¸ ìˆ˜ì§‘ API](./phase-4-events.md) | â¬œ ëŒ€ê¸° | 3 steps |
| 5 | [ëª¨ë‹ˆí„°ë§ ë° ì¸í”„ë¼ (ê¸°ì´ˆ)](./phase-5-infra.md) | â¬œ ëŒ€ê¸° | 3 steps |
| 6 | [Worker ë° Job Queue](./phase-6-worker.md) | â¬œ ëŒ€ê¸° | 3 steps |
| 7 | [Next.js ì›¹ì•±](./phase-7-webapp.md) | â¬œ ëŒ€ê¸° | 4 steps |
| 8 | [Chrome Extension](./phase-8-extension.md) | â¬œ ëŒ€ê¸° | 5 steps |
| 9 | [í”Œëœ ë° ì‚¬ìš©ëŸ‰ ì‹œìŠ¤í…œ](./phase-9-plan-usage.md) | â¬œ ëŒ€ê¸° | 5 steps |
| 10 | [AI ë§ˆì¸ë“œë§µ](./phase-10-ai.md) | â¬œ ëŒ€ê¸° | 6 steps |
| 11 | [ì›¹ì•± ëŒ€ì‹œë³´ë“œ](./phase-11-dashboard.md) | â¬œ ëŒ€ê¸° | 4 steps |
| 12 | [í”„ë¡œë•ì…˜ ëª¨ë‹ˆí„°ë§](./phase-12-monitoring.md) | â¬œ ëŒ€ê¸° | 4 steps |
| 13 | [ë°°í¬ ë° ìš´ì˜](./phase-13-deployment.md) | â¬œ ëŒ€ê¸° | 4 steps |
| 14 | [Stripe ê²°ì œ ì—°ë™](./phase-14-billing.md) | â¬œ ëŒ€ê¸° | 3 steps |

**ìƒíƒœ ë²”ë¡€:**

- â¬œ ëŒ€ê¸°
- ğŸŸ¡ ì§„í–‰ ì¤‘
- âœ… ì™„ë£Œ

---

## ì˜ì¡´ì„± ê·¸ë˜í”„

```mermaid
flowchart TD
    P0[Phase 0<br/>3ë‹¨ê³„ ê°œë°œ í™˜ê²½] --> P1[Phase 1<br/>í”„ë¡œì íŠ¸ ì´ˆê¸°í™”]
    P1 --> P1_5[Phase 1.5<br/>API ìŠ¤í™]
    P1_5 --> P2[Phase 2<br/>ì¸ì¦]
    P2 --> P3[Phase 3<br/>ì„¸ì…˜]
    P3 --> P4[Phase 4<br/>ì´ë²¤íŠ¸]
    P4 --> P5[Phase 5<br/>ì¸í”„ë¼ ê¸°ì´ˆ]
    P5 --> P6[Phase 6<br/>Worker]

    %% Phase 2.1: Google OAuth (Phase 6 ì´í›„, Phase 7 ì „)
    P6 --> P2_1[Phase 2.1<br/>Google OAuth]

    %% Phase 7: ì¸ì¦ + ì„¸ì…˜ + ì¸í”„ë¼ + OAuth í•„ìš”
    P2 --> P7[Phase 7<br/>ì›¹ì•±]
    P3 --> P7
    P5 --> P7
    P2_1 --> P7

    %% Phase 8: ì¸ì¦ + ì´ë²¤íŠ¸ API í•„ìš”
    P2 --> P8[Phase 8<br/>Extension]
    P4 --> P8

    %% Phase 9: í”Œëœ/ì‚¬ìš©ëŸ‰ (AI ì „ì— í•„ìš”)
    P8 --> P9[Phase 9<br/>í”Œëœ/ì‚¬ìš©ëŸ‰]

    %% Phase 10: AI (ì‚¬ìš©ëŸ‰ ì‹œìŠ¤í…œ ì—°ë™)
    P6 --> P10[Phase 10<br/>AI]
    P9 --> P10

    %% Phase 11: ëŒ€ì‹œë³´ë“œ
    P7 --> P11[Phase 11<br/>ëŒ€ì‹œë³´ë“œ]
    P10 --> P11

    %% Phase 12-14: ìš´ì˜ ë° ê²°ì œ
    P11 --> P12[Phase 12<br/>ëª¨ë‹ˆí„°ë§]
    P12 --> P13[Phase 13<br/>ë°°í¬/ìš´ì˜]
    P13 --> P14[Phase 14<br/>Stripe ê²°ì œ]

    style P0 fill:#e1f5fe
    style P1 fill:#e1f5fe
    style P1_5 fill:#e1f5fe
    style P2 fill:#fff3e0
    style P2_1 fill:#fff3e0
    style P3 fill:#fff3e0
    style P4 fill:#fff3e0
    style P5 fill:#e8f5e9
    style P6 fill:#e8f5e9
    style P7 fill:#fce4ec
    style P8 fill:#fce4ec
    style P9 fill:#fff9c4
    style P10 fill:#f3e5f5
    style P11 fill:#f3e5f5
    style P12 fill:#efebe9
    style P13 fill:#efebe9
    style P14 fill:#fff9c4
```

---

## ì‚¬ìš© ë°©ë²•

### 1. Phase ë¬¸ì„œ ì—´ê¸°

ê° Phase ë¬¸ì„œì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- **ëª©í‘œ**: ì´ Phaseì—ì„œ ë‹¬ì„±í•´ì•¼ í•  ê²ƒ
- **ì„ í–‰ ì¡°ê±´**: ì‹œì‘í•˜ê¸° ì „ì— ì™„ë£Œë˜ì–´ì•¼ í•  Phase
- **Stepë³„ ìƒì„¸ ê°€ì´ë“œ**: ê° Stepì˜ ì‘ì—… ë‚´ìš©ê³¼ ì²´í¬ë¦¬ìŠ¤íŠ¸
- **ê²°ê³¼ë¬¼**: ì™„ë£Œ ì‹œ í™•ì¸í•´ì•¼ í•  ì‚°ì¶œë¬¼
- **ê²€ì¦ ë°©ë²•**: Phase ì™„ë£Œë¥¼ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸/ëª…ë ¹ì–´

### 2. ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‚¬ìš©

ê° Stepì—ëŠ” ì„¸ë¶€ ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤:

```markdown
- [ ] ì‘ì—… í•­ëª© 1
- [ ] ì‘ì—… í•­ëª© 2
  - [ ] ì„¸ë¶€ ì‘ì—… 2.1
  - [ ] ì„¸ë¶€ ì‘ì—… 2.2
```

ì‘ì—… ì™„ë£Œ ì‹œ `[x]`ë¡œ ë³€ê²½í•˜ì„¸ìš”:

```markdown
- [x] ì‘ì—… í•­ëª© 1
- [ ] ì‘ì—… í•­ëª© 2
```

### 3. ê´€ë ¨ ë¬¸ì„œ ì°¸ì¡°

ê° PhaseëŠ” ìƒì„¸ ê¸°ìˆ  ë¬¸ì„œë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤:

- [01-architecture.md](../01-architecture.md) - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
- [02-data-structure.md](../02-data-structure.md) - ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„
- [07-api-spec-workflow.md](../07-api-spec-workflow.md) - API ìŠ¤í™ ì›Œí¬í”Œë¡œìš°

---

## ê¶Œì¥ ì‘ì—… ìˆœì„œ

### ê°œë°œ í™˜ê²½ ì„¤ì •

1. Phase 0 (3ë‹¨ê³„ ê°œë°œ í™˜ê²½)

### MVP (ìµœì†Œ ê¸°ëŠ¥ ì œí’ˆ)

2. Phase 1 â†’ Phase 1.5 â†’ Phase 2 â†’ Phase 3 â†’ Phase 4
3. Phase 5 (ì¸í”„ë¼ ê¸°ì´ˆ)
4. Phase 8 (Extension ê¸°ë³¸) - Phase 2, 4 ì˜ì¡´
5. **MVP ì™„ë£Œ**: ë¸Œë¼ìš°ì§• ê¸°ë¡ ìˆ˜ì§‘ ê°€ëŠ¥

### Core Features

6. Phase 6 (Worker)
7. Phase 2.1 (Google OAuth) - Phase 6 ì´í›„, Phase 7 ì „ì— êµ¬í˜„
8. Phase 7 (ì›¹ì•± ê¸°ë³¸) - Phase 2, 3, 5, 2.1 ì˜ì¡´
9. Phase 9 (í”Œëœ/ì‚¬ìš©ëŸ‰) - Phase 8 ì´í›„
10. Phase 10 (AI) - Phase 6, 9 ì˜ì¡´
11. **Core ì™„ë£Œ**: ë§ˆì¸ë“œë§µ ìƒì„± ê°€ëŠ¥

### Dashboard & Polish

12. Phase 11 (ëŒ€ì‹œë³´ë“œ) - Phase 7, 10 ì˜ì¡´

### í”„ë¡œë•ì…˜ ì¤€ë¹„

13. Phase 12 (í”„ë¡œë•ì…˜ ëª¨ë‹ˆí„°ë§)
14. Phase 13 (ë°°í¬/ìš´ì˜)

### ìˆ˜ìµí™”

15. Phase 14 (Stripe ê²°ì œ)

---

## íŒ

### Claude Codeì™€ í•¨ê»˜ ì‘ì—…í•˜ê¸°

```
"Phase 1ì˜ Step 1.1ì„ ì‹œì‘í•´ì¤˜"
"Phase 2 ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•´ì¤˜"
"Phase 3ì˜ ê²°ê³¼ë¬¼ì„ ê²€ì¦í•´ì¤˜"
```

### Git ë¸Œëœì¹˜ ì „ëµ

```bash
# Phaseë³„ ë¸Œëœì¹˜
git checkout -b feature/phase-1-init
git checkout -b feature/phase-2-auth

# Stepë³„ ì»¤ë°‹
git commit -m "Phase 1.1: ëª¨ë…¸ë ˆí¬ êµ¬ì¡° ì„¤ì •"
git commit -m "Phase 1.2: Go ë°±ì—”ë“œ ì´ˆê¸°í™”"
```

---

## í…ŒìŠ¤íŠ¸ ì „ëµ

### ì›ì¹™

1. **ê° Phaseì— í…ŒìŠ¤íŠ¸ ë‚´ì¥**: ë³„ë„ í…ŒìŠ¤íŠ¸ Phase ì—†ì´ ê° Phase ì™„ë£Œ ì¡°ê±´ì— í…ŒìŠ¤íŠ¸ í†µê³¼ í¬í•¨
2. **ì ì§„ì  í…ŒìŠ¤íŠ¸ ì¶•ì **: Phaseê°€ ì§„í–‰ë ìˆ˜ë¡ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ëˆ„ì 
3. **CI í•„ìˆ˜ í†µê³¼**: PR ë¨¸ì§€ ì „ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í•„ìˆ˜

### í…ŒìŠ¤íŠ¸ ê³„ì¸µ

| ê³„ì¸µ | ë„ì… ì‹œì  | ëŒ€ìƒ | ì‹¤í–‰ ë¹ˆë„ |
| ---- | --------- | ---- | --------- |
| ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | Phase 1 | ê°œë³„ í•¨ìˆ˜/ì„œë¹„ìŠ¤ | ë§¤ ì»¤ë°‹ |
| í†µí•© í…ŒìŠ¤íŠ¸ | Phase 2 | API ì—”ë“œí¬ì¸íŠ¸ | ë§¤ ì»¤ë°‹ |
| E2E í…ŒìŠ¤íŠ¸ | Phase 10 | ì „ì²´ ì‚¬ìš©ì í”Œë¡œìš° | PR ë¨¸ì§€ ì‹œ |

### í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

```bash
# Backend í…ŒìŠ¤íŠ¸
moonx backend:test

# Frontend í…ŒìŠ¤íŠ¸
moonx web:test

# Extension í…ŒìŠ¤íŠ¸
moonx extension:test

# ì „ì²´ í…ŒìŠ¤íŠ¸
moonx :test
```

---

## ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### ì›ì¹™

1. **Backward-compatible ë³€ê²½**: ê°€ëŠ¥í•˜ë©´ ë¡¤ë°± ê°€ëŠ¥í•œ ë§ˆì´ê·¸ë ˆì´ì…˜
2. **Phaseë³„ ë¶„ë¦¬**: ê° Phaseì˜ ìŠ¤í‚¤ë§ˆ ë³€ê²½ì„ ë³„ë„ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ
3. **CI ê²€ì¦**: PR ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ dry-run

### íŒŒì¼ ë„¤ì´ë°

```
{YYYYMMDD}_{sequence}_{phase}_{description}.sql
```

ì˜ˆì‹œ:

- `20241221_001_phase1_initial_schema.sql`
- `20241222_001_phase2_add_oauth_fields.sql`

### ë§ˆì´ê·¸ë ˆì´ì…˜ ëª…ë ¹ì–´

```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±
moonx backend:migrate-diff

# ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
moonx backend:migrate

# ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ
moonx backend:migrate-status
```

### ì•ˆì „í•œ ìŠ¤í‚¤ë§ˆ ë³€ê²½

| ë³€ê²½ ìœ í˜• | ì•ˆì „í•œ ë°©ë²• | í”¼í•´ì•¼ í•  ë°©ë²• |
| --------- | ----------- | -------------- |
| ì»¬ëŸ¼ ì¶”ê°€ | `ADD COLUMN ... DEFAULT` | `NOT NULL` ê¸°ë³¸ê°’ ì—†ì´ |
| ì»¬ëŸ¼ ì‚­ì œ | 2ë‹¨ê³„: ì½”ë“œ ì œê±° â†’ ì»¬ëŸ¼ ì‚­ì œ | ì¦‰ì‹œ ì‚­ì œ |
| ì¸ë±ìŠ¤ ì¶”ê°€ | `CONCURRENTLY` | ì¼ë°˜ `CREATE INDEX` |

> ìƒì„¸ ê°€ì´ë“œëŠ” [Phase 1 - Step 1.9](./phase-1-project-init.md#step-19-ì²«-ë²ˆì§¸-migration-ìƒì„±-ë°-ì ìš©)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
